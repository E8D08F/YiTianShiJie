@tailwind base;
@tailwind components;
@tailwind utilities;


@font-face {
    font-family: Kai;
    src: local("Kaiti TC Regular"), local(STKaiTi-TC-Regular), local("Kaiti TC"), local("Kaiti SC"), local(STKaiti), local(BiauKai), local("標楷體"), local(DFKaiShu-SB-Estd-BF), local(Kaiti), local(DFKai-SB);
}

@font-face {
    font-family: BopomofoRuby;
    src: url(https://raw.githubusercontent.com/cmex-30/Bopomofo_on_Web/master/font/BopomofoRuby1909-v1-Regular.ttf);
}

:root {
    --foreground-colour: #000a0cf5;
    --background-colour: #fdfdfc;
    --a-colour: #CB2E5A;
    --selection-colour: #CB2E5A32;
    --side-right-gradient-background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.383) 25%, rgba(255,255,255,0.707) 50%, rgba(255,255,255,0.924) 75%, rgba(255,255,255,1) 100%);
    --side-left-gradient-background: linear-gradient(270deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.383) 25%, rgba(255,255,255,0.707) 50%, rgba(255,255,255,0.924) 75%, rgba(255,255,255,1) 100%);
}

@media screen and (prefers-color-scheme: dark) {
    :root {
        --foreground-colour: #fffffee3;
        --background-colour: #181a1b;
        --a-colour: #e16b8c;
        --selection-colour: #e16b8c32;
        --side-right-gradient-background: linear-gradient(90deg, rgba(24,26,27,0) 0%, rgba(24,26,27,0.383) 25%, rgba(24,26,27,0.707) 50%, rgba(24,26,27,0.924) 75%, rgba(24,26,27,1) 100%);
        --side-left-gradient-background: linear-gradient(270deg, rgba(24,26,27,0) 0%, rgba(24,26,27,0.383) 25%, rgba(24,26,27,0.707) 50%, rgba(24,26,27,0.924) 75%, rgba(24,26,27,1) 100%);
    }
}


html,
body {
    writing-mode: vertical-rl;
    font-size: 18px;
}

body {
    font-family: 'Source Han Serif TC', source-han-serif-tc, serif;
    font-weight: 400;
    font-style: normal;
    color: var(--foreground-colour);

    background-color: var(--background-colour);
    
    overscroll-behavior: none;
    overflow-y: hidden;
}

.tategaki-container-1 {
    height: 100vh;
    width: 100vw;
    mask-image: linear-gradient(to right, transparent, black 0.5rem);
}

.tategaki-container-2 {
    height: 100vh;
    width: 100vw;
    mask-image: linear-gradient(to left, transparent, black 0.5rem);
}

article {
    margin: 3.667rem 3.334rem;
    height: 32rem;

    font-size: 1rem;
    line-height: 1.667;
    text-align: justify;

    /* For notches */
    padding-right: calc(env(safe-area-inset-right) - 1.667rem);
    padding-left: calc(env(safe-area-inset-left) - 1.667rem);
}

.latin {
    font-family: 'Crimson Pro', serif;
    /* Can be ignored */
    font-weight: 345;

    position: relative;
    left: 0.083rem;
}

.cjk-punc {
    font-family: 'Source Han Serif TC', source-han-serif-tc, serif;
}

#heading {
    margin-left: 5rem;
}

h1, h1 .latin, h1 .cjk-punc {
    font-family: 'Source Han Sans TC', source-han-sans-cjk-tc, sans-serif;
    font-weight: 700;
}

p:not(:first-of-type):not(.original-post) {
    text-indent: 1rem;
}

blockquote p:first-of-type {
    text-indent: 1rem;
}

blockquote {
    font-family: 'AR Zhongkai GB18030 Medium', Kai, serif;
}

a { color: var(--a-colour); }

/* CJK Emphasis  */
em  {
    font-style: normal;
    text-emphasis: '\25AA';
    -webkit-text-emphasis: '\25AA';
    /* Would it be nice if offset can be customised */
}

em.latin, em .latin {
    font-style: italic;
    text-emphasis: none;
    -webkit-text-emphasis: none;          
}

/* Lists */
ul { list-style-type: '\25AA\0020'; }

ol {
    list-style-type: trad-chinese-informal;
    list-style-position: inside;
}

ol li {
    margin: 0;
    text-indent: 1rem;
    text-align: justify;
}

rt {
    font-size: 0.45rem;
    
    ruby-align: center;
    text-align: center;
    letter-spacing: 0;

    font-feature-settings: "vpal";

    -webkit-font-smoothing: initial;
    -moz-osx-font-smoothing: initial;
    text-rendering: initial;
}

rt.bopomofo {
    font-family: BopomofoRuby;
    text-orientation: upright;
}

rt.pinyin {
    font-size: 0.6rem;
    font-family: 'Crimson Pro', serif;

    position: relative;
    left: 0.1rem;
}

hr {
    border: none;
    margin: 0;
}

hr::before {
    content: "❧";
    display: block;
    text-align: center;
    margin: 0 1.667rem;

    position: relative;
    left: 0.273rem;
}

.no-indent {
    text-indent: 0;
}

.original-post {
    margin-right: 1.667rem;
}

::-moz-selection {
    background: var(--selection-colour);
}
  
::selection {
    background: var(--selection-colour);
}

@media screen and (max-height: 708px) {
    article {
        height: 31rem;
    }
}

@media screen and (max-height: 690px) {
    article {
        height: 30rem;
    }
}

@media screen and (max-height: 672px) {
    article {
        height: 29rem;
    }
}

@media screen and (max-height: 654px) {
    article {
        height: 28rem;
    }
}

@media screen and (max-height: 636px) {
    html {
        font-size: 16px;
    }
    article {
        height: 32rem;
    }
}

@media screen and (max-height: 629.3px) {
    article {
        height: 31rem;
    }
}

@media screen and (max-height: 613.3px) {
    article {
        height: 30rem;
    }
}

@media screen and (max-height: 597.3px) {
    article {
        height: 29rem;
    }
}

@media screen and (max-height: 581.3px) {
    article {
        height: 28rem;
    }
}

@media screen and (max-height: 565.3px) {
    article {
        margin: max(calc((100vh - 28rem) / 2), 2rem) max(calc((100vh - 28rem) / 2 - 0.3335rem), 1.6665rem);
    }
}

@media screen and (max-height: 512px) {
    article {
        margin: 2rem 1.6665rem;
        height: 27rem;
    }
}

@media screen and (max-height: 496px) {
    article {
        height: 26rem;
    }
}

@media screen and (max-height: 480px) {
    article {
        height: 25rem;
    }
}

@media screen and (max-height: 464px) {
    article {
        height: 24rem;
    }
}

@media screen and (max-height: 448px) {
    article {
        height: 23rem;
    }
}

@media screen and (max-height: 432px) {
    article {
        height: 22rem;
    }
}

@media screen and (max-height: 416px) {
    article {
        height: 21rem;
    }
}

@media screen and (max-height: 400px) {
    article {
        height: 20rem;
    }
}

@media screen and (max-height: 384px) {
    article {
        height: 19rem;
    }
}

@media screen and (max-height: 368px) {
    article {
        height: 18rem;
    }
}

/* Override Tategaki default  */
.tategaki {
    hanging-punctuation: none;
}

/* Fix space height  */
.squeeze-out-space::before, .squeeze-in-space::before {
    content: "\0020";
    font: 0.833em Courier;  /* Alternative font. Its U+0020 must be wider than that in CJK font. */
}
